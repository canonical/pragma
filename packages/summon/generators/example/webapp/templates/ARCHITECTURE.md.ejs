# Architecture: <%= pascalCase(name) %>

This document describes the architecture and design decisions for <%= name %>.

## Overview

<%= description %>

## Technology Choices

### Framework: <%= framework === 'react' ? 'React' : 'Vanilla TypeScript' %>

<% if (framework === 'react') { -%>
React was chosen for its:
- Component-based architecture
- Large ecosystem and community
- Excellent developer tooling
- Virtual DOM for efficient updates
<% } else { -%>
Vanilla TypeScript was chosen for its:
- Minimal bundle size
- No framework overhead
- Direct DOM manipulation for maximum performance
- Simplicity and maintainability
<% } -%>

### Styling: <%= styling === 'tailwind' ? 'Tailwind CSS' : styling === 'css' ? 'Plain CSS' : 'None' %>

<% if (styling === 'tailwind') { -%>
Tailwind CSS provides:
- Utility-first approach for rapid development
- Consistent design system
- Built-in responsive design
- Small production bundle with PurgeCSS
<% } else if (styling === 'css') { -%>
Plain CSS was chosen for:
- No build-time dependencies
- Full control over styling
- Browser-native cascade and specificity
- Easy debugging
<% } -%>

## Directory Structure

```
<%= name %>/
<%= '├── ' %>src/                 # Source code
<%= '│   ├── ' %>main.<%= framework === 'react' ? 'tsx' : 'ts' %>        # Application entry point
<%= '│   ├── ' %><%= framework === 'react' ? 'App.tsx' : 'app.ts' %>          # Root component/module
<% if (styling !== 'none') { -%>
<%= '│   ├── ' %>styles.css        # Global styles
<% } -%>
<% if (hasRouter) { -%>
<%= '│   ├── ' %>router.ts         # Routing configuration
<% } -%>
<% if (hasState) { -%>
<%= '│   ├── ' %>state.ts          # State management
<% } -%>
<% if (hasApi) { -%>
<%= '│   ├── ' %>api.ts            # API client
<% } -%>
<% if (hasLogging) { -%>
<%= '│   ├── ' %>logging.ts        # Logging utilities
<% } -%>
<%= '│   └── ' %>components/       # Reusable components
<%= '├── ' %>public/               # Static assets
<% if (withTests) { -%>
<%= '├── ' %>tests/                # Test files
<% } -%>
<%= '└── ' %>docs/                 # Documentation
```

<% if (features.length > 0) { -%>
## Feature Modules

<% if (hasRouter) { -%>
### Router

<% if (framework === 'react') { -%>
Client-side routing using React Router v6:
- Declarative route configuration
- Nested routes support
- URL parameters and query strings
- Programmatic navigation
<% } else { -%>
Custom client-side router:
- Hash-based or history-based routing
- Route parameters extraction
- Middleware support
- Navigation guards
<% } -%>

<% } -%>
<% if (hasState) { -%>
### State Management

<% if (framework === 'react') { -%>
Using Zustand for state management:
- Minimal boilerplate
- TypeScript-first design
- No providers required
- Selective subscriptions for performance
<% } else { -%>
Custom pub/sub store:
- Simple and predictable
- Type-safe state updates
- Subscription-based reactivity
- No external dependencies
<% } -%>

<% } -%>
<% if (hasApi) { -%>
### API Client

Using ky for HTTP requests:
- Fetch-based, modern API
- Automatic retries
- Request/response hooks
- TypeScript generics for responses

<% } -%>
<% if (hasLogging) { -%>
### Logging

Custom logging utility:
- Multiple log levels (debug, info, warn, error)
- Log history for debugging
- Configurable minimum level
- Context data support

<% } -%>
<% } -%>
## Data Flow

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│    User     │────▶│     UI      │────▶│   State     │
│  Interaction│     │  Components │     │  Management │
└─────────────┘     └─────────────┘     └─────────────┘
                           │                   │
                           ▼                   ▼
                    ┌─────────────┐     ┌─────────────┐
                    │   Router    │     │  API Layer  │
                    │ (optional)  │     │ (optional)  │
                    └─────────────┘     └─────────────┘
```

## Configuration

| Variable | Description | Default |
|----------|-------------|---------|
<% if (hasApi) { -%>
| `VITE_API_URL` | API base URL | `https://api.example.com` |
<% } -%>
| `NODE_ENV` | Environment mode | `development` |

## Performance Considerations

<% if (framework === 'react') { -%>
1. **Component Memoization**: Use `React.memo` for expensive renders
2. **State Selectors**: Use selective subscriptions to avoid unnecessary re-renders
3. **Code Splitting**: Lazy load routes and heavy components
4. **Bundle Analysis**: Regularly analyze bundle size
<% } else { -%>
1. **DOM Updates**: Batch DOM updates for better performance
2. **Event Delegation**: Use event delegation for dynamic content
3. **Debouncing**: Debounce expensive operations
4. **Virtual Scrolling**: For large lists, consider virtualization
<% } -%>

## Security

1. **Input Validation**: Always validate and sanitize user input
2. **XSS Prevention**: Escape HTML output, use CSP headers
3. **CORS**: Configure proper CORS settings on the API
4. **Authentication**: Store tokens securely, use HttpOnly cookies when possible

---

Generated by [Summon](https://github.com/canonical/ds25)
