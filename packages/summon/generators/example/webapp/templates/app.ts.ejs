// Generated by summon webapp
// Main application module for <%= name %>

<% if (hasLogging) { -%>
import { logger } from './logging';
<% } -%>
<% if (hasApi) { -%>
import { api } from './api';
<% } -%>

interface AppState {
  count: number;
}

const state: AppState = {
  count: 0,
};

/**
 * Initialize the application.
 */
export function init(container: HTMLElement): void {
<% if (hasLogging) { -%>
  logger.info('Initializing <%= name %>...');
<% } -%>

  render(container);
  setupEventListeners(container);

<% if (hasLogging) { -%>
  logger.info('<%= name %> initialized successfully');
<% } -%>
}

/**
 * Render the application UI.
 */
function render(container: HTMLElement): void {
  container.innerHTML = `
    <div class="<%= styling === 'tailwind' ? 'min-h-screen bg-gray-100 p-8' : 'app-container' %>">
      <header class="<%= styling === 'tailwind' ? 'text-center mb-8' : 'app-header' %>">
        <h1 class="<%= styling === 'tailwind' ? 'text-4xl font-bold text-gray-800' : '' %>">
          Welcome to <%= name %>
        </h1>
        <p class="<%= styling === 'tailwind' ? 'text-gray-600 mt-2' : '' %>">
          <%= description %>
        </p>
      </header>

      <main class="<%= styling === 'tailwind' ? 'max-w-2xl mx-auto' : 'app-main' %>">
<% if (hasState) { -%>
        <section class="<%= styling === 'tailwind' ? 'bg-white rounded-lg shadow p-6 mb-6' : 'card' %>">
          <h2 class="<%= styling === 'tailwind' ? 'text-xl font-semibold mb-4' : '' %>">Counter Demo</h2>
          <div class="<%= styling === 'tailwind' ? 'flex items-center gap-4' : 'counter' %>">
            <button
              id="decrement"
              class="<%= styling === 'tailwind' ? 'px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600' : 'btn btn-danger' %>"
            >
              -
            </button>
            <span id="count" class="<%= styling === 'tailwind' ? 'text-2xl font-mono' : 'count' %>">${state.count}</span>
            <button
              id="increment"
              class="<%= styling === 'tailwind' ? 'px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600' : 'btn btn-success' %>"
            >
              +
            </button>
          </div>
        </section>
<% } -%>

        <section class="<%= styling === 'tailwind' ? 'bg-white rounded-lg shadow p-6' : 'card' %>">
          <h2 class="<%= styling === 'tailwind' ? 'text-xl font-semibold mb-4' : '' %>">Features</h2>
          <ul class="<%= styling === 'tailwind' ? 'list-disc list-inside space-y-2' : 'feature-list' %>">
            <li>Framework: <%= framework %></li>
            <li>Styling: <%= styling %></li>
<% if (hasRouter) { -%>
            <li>Routing enabled</li>
<% } -%>
<% if (hasState) { -%>
            <li>State management</li>
<% } -%>
<% if (hasApi) { -%>
            <li>API client configured</li>
<% } -%>
<% if (hasLogging) { -%>
            <li>Logging enabled</li>
<% } -%>
          </ul>
        </section>
      </main>

      <footer class="<%= styling === 'tailwind' ? 'text-center mt-8 text-gray-500' : 'app-footer' %>">
        <p>Generated by Summon</p>
      </footer>
    </div>
  `;
}

<% if (hasState) { -%>
/**
 * Setup event listeners for interactive elements.
 */
function setupEventListeners(container: HTMLElement): void {
  const incrementBtn = container.querySelector('#increment');
  const decrementBtn = container.querySelector('#decrement');
  const countDisplay = container.querySelector('#count');

  incrementBtn?.addEventListener('click', () => {
    state.count++;
    if (countDisplay) countDisplay.textContent = String(state.count);
<% if (hasLogging) { -%>
    logger.debug(`Count incremented to ${state.count}`);
<% } -%>
  });

  decrementBtn?.addEventListener('click', () => {
    state.count--;
    if (countDisplay) countDisplay.textContent = String(state.count);
<% if (hasLogging) { -%>
    logger.debug(`Count decremented to ${state.count}`);
<% } -%>
  });
}
<% } else { -%>
/**
 * Setup event listeners for interactive elements.
 */
function setupEventListeners(_container: HTMLElement): void {
  // Add your event listeners here
}
<% } -%>
